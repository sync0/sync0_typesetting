\setmainlanguage[autospacing=true, autospaceguillemets=true, frenchfootnote=true]{french} 
% Set secondary typesetting languages.
\setotherlanguages{english, spanish} 
% Set symbol to automatically recognize quotes. 
\MakeAutoQuote{«}{»}
% \MakeForeignQuote{english}{``}{"}
\usepackage{fontspec}
\setmainfont[SmallCapsFont={ScalaSans Caps}]{Scala}
\setsansfont[Ligatures=TeX, Scale=MatchLowercase, UprightFont = {ScalaSansPro Regular}, BoldFont={ScalaSansPro Bold}, ItalicFont={ScalaSansPro Italic}, BoldItalicFont={ScalaSansPro BoldItalic}, SmallCapsFont={ScalaSans Caps}, SmallCapsFeatures={LetterSpace=0.5}]{ScalaSansPro}
% \setsansfont[Ligatures=TeX, LetterSpace=1.5, Scale=MatchLowercase, UprightFont = {ScalaSansPro Regular}, BoldFont={ScalaSansPro Bold}, ItalicFont={ScalaSansPro Italic}, BoldItalicFont={ScalaSansPro BoldItalic}, SmallCapsFont={ScalaSans Caps}, SmallCapsFeatures={LetterSpace=0.5}]{ScalaSansPro}
\setmonofont[Scale=MatchLowercase]{Consolas}
%% \defaultfontfeatures{Ligatures=TeX, Scale=MatchLowercase}

% \newfontfamily\mytitlefont[Ligatures=TeX, LetterSpace=2, Scale=MatchLowercase, UprightFont = {ScalaSansPro Regular}, BoldFont={ScalaSansPro Bold}, ItalicFont={ScalaSansPro Italic}, BoldItalicFont={ScalaSansPro BoldItalic}, SmallCapsFont={ScalaSans Caps}]{ScalaSansPro}
\newfontfamily\mytitlefont[Ligatures=TeX, Scale=MatchLowercase, UprightFont = {ScalaSansPro Regular}, BoldFont={ScalaSansPro Bold}, ItalicFont={ScalaSansPro Italic}, BoldItalicFont={ScalaSansPro BoldItalic}, SmallCapsFont={ScalaSans Caps}]{ScalaSansPro}

% It was necessary to prevent using LetterSpace to avoid causing an
% error with Luatex. See
% https://tex.stackexchange.com/questions/604753/error-with-lualatex-in-tex-live-2021-when-using-letterspace-feature-in-combinati

% \setmainfont[UprightFont={Palatino LT Std Roman}, BoldFont={Palatino LT Std Bold}, ItalicFont={Palatino LT Std Italic}, BoldItalicFont={Palatino LT Std Bold Italic}, Numbers={Proportional,OldStyle}]{Palatino LT Std}
% \setsansfont[Ligatures=TeX, LetterSpace=2, Numbers={Lowercase, Proportional}, Scale=MatchLowercase, UprightFont = {ScalaSansPro Regular}, BoldFont={ScalaSansPro Bold}, ItalicFont={ScalaSansPro Italic}, BoldItalicFont={ScalaSansPro BoldItalic}, SmallCapsFont={ScalaSans Caps}]{ScalaSansPro}

% Use italics on block quotations.

%% \renewcommand{\mkbegdispquote}[2]{\itshape}
% \AtBeginEnvironment{quote}{\itshape}
% \SetExtraKerning[name=french-default,context = french,unit = space ]{ encoding = {OT1,T1,LY1} }{: = {1000,}, ; = {500, }, ! = {500, }, ? = {500, }, ' = {500, 400}}
% Superscript & Subscript 
%% Adds macros to typeset 1st, 2nd, etc., in different languages.

\usepackage[french]{fmtcount} 
\fmtcountsetoptions{french=france}

% Configure microtypographic settings. 
\usepackage[protrusion=true,expansion,tracking=true]{microtype}
\frenchspacing